!function(h){function e(){h('a[href*="wcf-up-offer-yes"]').each(function(e){const t=h(this);0===e?t.attr("id","wcf-upsell-offer"):t.attr("id","wcf-upsell-offer-"+e)}),h('a[href*="wcf-down-offer-yes"]').each(function(e){const t=h(this);0===e?t.attr("id","wcf-downsell-offer"):t.attr("id","wcf-downsell-offer-"+e)}),h(document).on("click",'a[href*="wcf-up-offer"], a[href*="wcf-down-offer"]',function(e){e.preventDefault();const t=h(this),a=t.attr("href"),r=cartflows_offer.step_id,o=cartflows_offer.product_id,c=cartflows_offer.order_id,n=cartflows_offer.order_key,i=cartflows.current_flow;let _="yes",s="upsell",f=0,d=0;if(-1!==a.indexOf("wcf-up-offer")&&(s="upsell",_=-1!==a.indexOf("wcf-up-offer-yes")?"yes":"no"),-1!==a.indexOf("wcf-down-offer")&&(s="downsell",_=-1!==a.indexOf("wcf-down-offer-yes")?"yes":"no"),"yes"===_){const w=h(".wcf-offer-product-variation");if(0<w.length){const p=w.find(".variations_form"),m=p.find("input.variation_id");if(f=parseInt(m.val()),0<h(".var_not_selected").length||""===f||0===f)return p.find(".variations select").each(function(){0===h(this).val().length&&h(this).addClass("var_not_selected")}),h([document.documentElement,document.body]).animate({scrollTop:p.find(".variations select").offset().top-100},1e3),!1}}if("yes"!==cartflows_offer.skip_offer||"yes"!==_){h("body").trigger("wcf-show-loader",_),action="yes"===_?"wcf_"+s+"_accepted":"wcf_"+s+"_rejected";const u=h(".wcf-offer-product-quantity");if(0<u.length){const y=u.find('input[name="quantity"]');e=parseInt(y.val());0<e&&(d=e)}const g={action:"",offer_action:_,offer_type:s,step_id:r,product_id:o,variation_id:f,input_qty:d,order_id:c,order_key:n,flow_id:i,stripe_sca_payment:!1,stripe_intent_id:"",_nonce:""};var l;return"yes"===_?"stripe"===cartflows_offer.payment_method?(g.action="wcf_stripe_sca_check",g._nonce=cartflows_offer.wcf_stripe_sca_check_nonce,h.ajax({url:cartflows.ajax_url,data:g,dataType:"json",type:"POST",success(e){if(e.hasOwnProperty("intent_secret")){const t=Stripe(e.stripe_pk);t.handleCardPayment(e.intent_secret).then(function(e){if(e.error)throw e.error;"requires_capture"!==e.paymentIntent.status&&"succeeded"!==e.paymentIntent.status||(g.action=action,g.stripe_sca_payment=!0,g.stripe_intent_id=e.paymentIntent.id,v(g))}).catch(function(){window.location.reload()})}else g.action=action,v(g)}})):"mollie_wc_gateway_creditcard"===cartflows_offer.payment_method||"mollie_wc_gateway_ideal"===cartflows_offer.payment_method?function(t,e){if("mollie_wc_gateway_creditcard"===e){t.action="wcf_mollie_creditcard_process";t._nonce=cartflows_offer.wcf_mollie_creditcard_process_nonce}if("mollie_wc_gateway_ideal"===e){t.action="wcf_mollie_ideal_process";t._nonce=cartflows_offer.wcf_mollie_ideal_process_nonce}h.ajax({url:cartflows.ajax_url,data:t,dataType:"json",type:"POST",success(e){console.log(e);if("success"===e.result)window.location.href=e.redirect;else{t.action=action;v(t)}}})}(g,cartflows_offer.payment_method):"ppcp-gateway"===cartflows_offer.payment_method?(l=g,cartflows_offer.payment_method,l.action="wcf_create_paypal_payments_order",l._nonce=cartflows_offer.wcf_create_paypal_order_nonce,h.ajax({url:cartflows.ajax_url,data:l,dataType:"json",type:"POST",success(e){"success"===e.status?window.location.href=e.redirect:(l.action="wcf_"+l.offer_type+"_accepted",v(l))}})):"cpsw_stripe"===cartflows_offer.payment_method?(g.action="wcf_cpsw_create_payment_intent",g._nonce=cartflows_offer.wcf_cpsw_create_payment_intent_nonce,h.ajax({url:cartflows.ajax_url,data:g,dataType:"json",type:"POST",success(e){if(e.hasOwnProperty("client_secret")&&""!==e.client_secret){const t=Stripe(e.cpsw_pk);t.confirmCardPayment(e.client_secret).then(function(e){if(e.error)throw e.error;"requires_capture"!==e.paymentIntent.status&&"succeeded"!==e.paymentIntent.status||(g.action=action,g.cpsw_intent_id=e.paymentIntent.id,g.cpsw_payment_method=e.paymentIntent.payment_method,v(g))}).catch(function(){window.location.reload()})}else g.action=action,v(g)}})):(g.action=action,v(g)):(g.action=action,v(g)),!1}})}function t(){const e=jQuery(".woocommerce-product-gallery");if(0<e.length&&1<e.find(".woocommerce-product-gallery__image").length){const t=jQuery(".woocommerce-product-gallery").flexslider({animation:"slide",animationLoop:!1,controlNav:"thumbnails",selector:".slides .woocommerce-product-gallery__image",directionNav:!1});h(window).on("load",function(){t.trigger("resize")});const s=h(".variations_form");if(0<s.length){const a=function(e){const t=s,a=h(".woocommerce-product-gallery"),r=a.find(".flex-control-nav");if(e&&e.image&&e.image.src&&1<e.image.src.length){0<r.find('li img[data-o_src="'+e.image.gallery_thumbnail_src+'"]').length&&f();const o=r.find('li img[src="'+e.image.gallery_thumbnail_src+'"]');if(0<o.length)return o.trigger("click"),t.attr("current-image",e.image_id),void window.setTimeout(function(){h(window).trigger("resize"),a.trigger("woocommerce_gallery_init_zoom")},20);const c=a.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),n=c.find(".wp-post-image"),i=c.find("a").eq(0);n.wc_set_variation_attr("src",e.image.src),n.wc_set_variation_attr("height",e.image.src_h),n.wc_set_variation_attr("width",e.image.src_w),n.wc_set_variation_attr("srcset",e.image.srcset),n.wc_set_variation_attr("sizes",e.image.sizes),n.wc_set_variation_attr("title",e.image.title),n.wc_set_variation_attr("data-caption",e.image.caption),n.wc_set_variation_attr("alt",e.image.alt),n.wc_set_variation_attr("data-src",e.image.full_src),n.wc_set_variation_attr("data-large_image",e.image.full_src),n.wc_set_variation_attr("data-large_image_width",e.image.full_src_w),n.wc_set_variation_attr("data-large_image_height",e.image.full_src_h),c.wc_set_variation_attr("data-thumb",e.image.src);const _=r.find("li:eq(0) img");_.wc_set_variation_attr("src",e.image.gallery_thumbnail_src),i.wc_set_variation_attr("href",e.image.full_src)}else f();window.setTimeout(function(){h(window).trigger("resize"),function(e){const t=s,a=h(".woocommerce-product-gallery"),r=e&&e.image_id?e.image_id:"";let o=!1;t.attr("current-image")!==r&&(o=!0),t.attr("current-image",r),o&&a.flexslider(0)}(e)},20)},f=function(){const e=h(".woocommerce-product-gallery"),t=e.find(".flex-control-nav"),a=t.find("li:eq(0) img"),r=e.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),o=r.find(".wp-post-image"),c=r.find("a").eq(0);o.wc_reset_variation_attr("src"),o.wc_reset_variation_attr("width"),o.wc_reset_variation_attr("height"),o.wc_reset_variation_attr("srcset"),o.wc_reset_variation_attr("sizes"),o.wc_reset_variation_attr("title"),o.wc_reset_variation_attr("data-caption"),o.wc_reset_variation_attr("alt"),o.wc_reset_variation_attr("data-src"),o.wc_reset_variation_attr("data-large_image"),o.wc_reset_variation_attr("data-large_image_width"),o.wc_reset_variation_attr("data-large_image_height"),r.wc_reset_variation_attr("data-thumb"),a.wc_reset_variation_attr("src"),c.wc_reset_variation_attr("href")};h(".variations_form").on("found_variation",function(e,t){a(t)})}}}const a={getUrlParameter(e){const t=decodeURIComponent(window.location.search.substring(1)),a=t.split("&");let r,o;for(o=0;o<a.length;o++)if((r=a[o].split("="))[0]===e)return void 0===r[1]||r[1]}},o=function(e){var t;e.offer_action&&(t={action:e.action,flow_id:e.flow_id,input_qty:e.input_qty,offer_action:e.offer_action,offer_type:e.offer_type,order_id:e.order_id,product_id:e.product_id,step_id:e.step_id,variation_id:e.variation_id},document.dispatchEvent(new CustomEvent(e.action,{bubbles:!0,detail:t})))},v=function(r){r._nonce=cartflows_offer[r.action+"_nonce"],h.ajax({url:cartflows.ajax_url,data:r,dataType:"json",type:"POST",success(e){var t=e.message,a="wcf-payment-"+e.status;o(r),h("body").trigger("wcf-update-msg",[t,a]),setTimeout(function(){window.location.href=e.redirect},600)}})};h(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/offer-product-image.default",t)});function r(){0<h(".wcf-offer-product-quantity").length&&h(".wcf-offer-product-quantity .qty").on("change",function(){var e=h(this).val();h(".wcf-offer-product-quantity .qty").val(e)}),0<h(".wcf-offer-product-variation .variations select").length?(h(".wcf-variable-price-range").show().siblings().remove(),h(".wcf-offer-product-variation .variations select").on("change",function(){const e=h(this);var t=e.data("attribute_name");if(0!==e.length){const a=e.val();h('.wcf-offer-product-variation [data-attribute_name ="'+t+'"]').each(function(){h(this).val(a),""===a||0===a?h(this).addClass("var_not_selected"):h(this).removeClass("var_not_selected")})}}),h(".variations_form").on("found_variation",function(e,t){const a=cartflows_offer.discount_type,r=cartflows_offer.discount_value,o=cartflows_offer.currency_symbol,c=t.display_price;let n=t.display_price;0<r&&("discount_percent"===a?n-=n*r/100:"discount_price"===a&&(n-=r));let i='<span class="wcf-single-variation-price">';c!==n?(i+='<span class="wcf-regular-price del">',i+=o+c.toFixed(2),i+="</span>",i+='<span class="wcf-discount-price">',i+=o+n.toFixed(2)):(i+='<span class="wcf-regular-price">',i+=o+c.toFixed(2)),i+="</span>",i+="</span>",h(".wcf-offer-price").html(i)})):(h(".wcf-variable-price-range").remove(),h(".wcf-offer-price-inner").show()),t()}h(function(){if(h("body").on("wcf-show-loader",function(e,t){"no"===t&&(jQuery(".wcf-note-yes").hide(),jQuery(".wcf-note-no").show(),jQuery(".wcf-process-msg").hide()),h(".wcf-loader-bg").addClass("show")}),h("body").on("wcf-hide-loader",function(){h(".wcf-loader-bg").removeClass("show")}),h("body").on("wcf-update-msg",function(e,t,a){h(".wcf-order-msg .wcf-process-msg").text(t).addClass(a).show()}),e(),r(),"1"!==cartflows.is_pb_preview&&(jQuery(document).ajaxComplete(function(e,t){if(t.hasOwnProperty("responseJSON")){const a=t.responseJSON.hasOwnProperty("fragments")?t.responseJSON.fragments:null;a&&a.hasOwnProperty("added_to_cart_data")&&fbq("track","AddToCart",a.added_to_cart_data.added_to_cart),"enable"===(void 0!==cartflows.fb_setting?cartflows.fb_setting:cartflows.fb_active).facebook_pixel_add_payment_info&&a&&a.hasOwnProperty("fb_add_payment_info_data")&&(cartflows.fb_add_payment_info_data=a.fb_add_payment_info_data)}}),jQuery(document).ajaxComplete(function(e,t,a){if(t.hasOwnProperty("responseJSON")){var r=void 0!==cartflows.ga_setting?cartflows.ga_setting:cartflows.wcf_ga_active,o=r.enable_add_to_cart,r=r.enable_add_payment_info;if(cartflows.is_checkout_page){const c=t.responseJSON.hasOwnProperty("fragments")?t.responseJSON.fragments:null;a.hasOwnProperty("data")&&-1!==a.data.indexOf("action=wcf_bump_order_process")&&("enable"===o&&(c&&c.hasOwnProperty("ga_added_to_cart_data")&&gtag("event","add_to_cart",JSON.parse(c.ga_added_to_cart_data.add_to_cart)),c&&c.hasOwnProperty("ga_remove_to_cart_data")&&gtag("event","remove_from_cart",JSON.parse(c.ga_remove_to_cart_data.remove_from_cart))),"enable"===r&&c&&c.hasOwnProperty("ga_add_payment_info_data")&&(cartflows.add_payment_info_data=c.ga_add_payment_info_data))}}})),"undefined"!=typeof cartflows_offer){var t;let e="";a.getUrlParameter("wcf-mollie-return")&&("mollie_wc_gateway_creditcard"===cartflows_offer.payment_method&&(e=cartflows_offer.wcf_mollie_creditcard_process_nonce),"mollie_wc_gateway_ideal"===cartflows_offer.payment_method&&(e=cartflows_offer.wcf_mollie_ideal_process_nonce),t={action:"wcf_"+(t=cartflows_offer.offer_type)+"_accepted",offer_action:"yes",offer_type:t,step_id:cartflows_offer.step_id,product_id:cartflows_offer.product_id,order_id:cartflows_offer.order_id,order_key:cartflows_offer.order_key,flow_id:cartflows.current_flow,stripe_sca_payment:!1,stripe_intent_id:"",_nonce:e},v(t))}!function(){if("undefined"!=typeof cartflows_offer){var e=a.getUrlParameter("wcf-ppcp-return");let t;e&&(t=cartflows_offer.wcf_capture_paypal_order_nonce,e={action:"wcf_capture_paypal_order",step_id:cartflows_offer.step_id,order_id:cartflows_offer.order_id,_nonce:t},h("body").trigger("wcf-show-loader","yes"),h.ajax({url:cartflows.ajax_url,data:e,dataType:"json",type:"POST",success(e){if("success"===e.status){e=cartflows_offer.offer_type;const data={action:"wcf_"+e+"_accepted",offer_action:"yes",offer_type:e,step_id:cartflows_offer.step_id,product_id:cartflows_offer.product_id,order_id:cartflows_offer.order_id,order_key:cartflows_offer.order_key,flow_id:cartflows.current_flow,stripe_sca_payment:!1,stripe_intent_id:"",_nonce:t};v(data)}else data.action=data.action="wcf_"+data.offer_type+"_accepted",v(data)}}))}}()})}(jQuery);